# è´¡çŒ®æŒ‡å— (Contributing Guide)

æ„Ÿè°¢æ‚¨å¯¹ç”µå½±æ¨èç³»ç»Ÿé¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ã€‚

## ğŸ“‹ ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [å¦‚ä½•è´¡çŒ®](#å¦‚ä½•è´¡çŒ®)
- [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æäº¤è§„èŒƒ](#æäº¤è§„èŒƒ)
- [æµ‹è¯•è¦æ±‚](#æµ‹è¯•è¦æ±‚)
- [æ–‡æ¡£è´¡çŒ®](#æ–‡æ¡£è´¡çŒ®)

---

## è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ ä¸€ä¸ªå¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºï¼š

- âœ… å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- âœ… ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- âœ… å…³æ³¨ä»€ä¹ˆå¯¹ç¤¾åŒºæœ€æœ‰åˆ©
- âœ… å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç°å‡ºåŒç†å¿ƒ

### ä¸å¯æ¥å—çš„è¡Œä¸º

- âŒ ä½¿ç”¨æ€§åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
- âŒ äººèº«æ”»å‡»æˆ–æ”¿æ²»æ”»å‡»
- âŒ å…¬å¼€æˆ–ç§ä¸‹éªšæ‰°
- âŒ æœªç»æ˜ç¡®è®¸å¯å‘å¸ƒä»–äººçš„ç§äººä¿¡æ¯

---

## å¦‚ä½•è´¡çŒ®

### ğŸ› æŠ¥å‘Š Bug

å¦‚æœæ‚¨å‘ç°äº† Bugï¼Œè¯·ï¼š

1. **æ£€æŸ¥** [Issues](https://github.com/yourusername/movies-recommend/issues) æ˜¯å¦å·²æœ‰äººæŠ¥å‘Š
2. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–° Issueï¼ŒåŒ…å«ï¼š
   - æ¸…æ™°çš„æ ‡é¢˜
   - Bug çš„è¯¦ç»†æè¿°
   - å¤ç°æ­¥éª¤
   - é¢„æœŸè¡Œä¸º vs å®é™…è¡Œä¸º
   - ç³»ç»Ÿç¯å¢ƒï¼ˆæ“ä½œç³»ç»Ÿã€Python ç‰ˆæœ¬ç­‰ï¼‰
   - ç›¸å…³æˆªå›¾æˆ–æ—¥å¿—

**Bug æŠ¥å‘Šæ¨¡æ¿ï¼š**

```markdown
**Bug æè¿°**
ç®€æ´æ¸…æ™°çš„ Bug æè¿°

**å¤ç°æ­¥éª¤**
1. è®¿é—® '...'
2. ç‚¹å‡» '....'
3. æ»šåŠ¨åˆ° '....'
4. çœ‹åˆ°é”™è¯¯

**é¢„æœŸè¡Œä¸º**
åº”è¯¥å‘ç”Ÿä»€ä¹ˆ

**æˆªå›¾**
å¦‚æœé€‚ç”¨ï¼Œæ·»åŠ æˆªå›¾

**ç¯å¢ƒï¼š**
 - OS: [e.g. Ubuntu 20.04]
 - Python: [e.g. 3.10]
 - æµè§ˆå™¨: [e.g. Chrome 90]
```

### ğŸ’¡ æå‡ºæ–°åŠŸèƒ½

å¦‚æœæ‚¨æœ‰æ–°æƒ³æ³•ï¼š

1. **æœç´¢** æ˜¯å¦å·²æœ‰ç›¸å…³ Issue
2. åˆ›å»º Feature Requestï¼Œè¯´æ˜ï¼š
   - åŠŸèƒ½çš„åŠ¨æœºå’Œç›®çš„
   - è¯¦ç»†çš„åŠŸèƒ½æè¿°
   - å¯èƒ½çš„å®ç°æ–¹æ¡ˆ
   - ç›¸å…³çš„å‚è€ƒèµ„æ–™

### ğŸ“ æ”¹è¿›æ–‡æ¡£

æ–‡æ¡£è´¡çŒ®åŒæ ·é‡è¦ï¼æ‚¨å¯ä»¥ï¼š

- ä¿®æ­£é”™åˆ«å­—æˆ–è¯­æ³•é”™è¯¯
- æ”¹è¿›è¯´æ˜çš„æ¸…æ™°åº¦
- æ·»åŠ ç¤ºä¾‹ä»£ç 
- ç¿»è¯‘æ–‡æ¡£åˆ°å…¶ä»–è¯­è¨€

---

## å¼€å‘æµç¨‹

### 1. Fork é¡¹ç›®

ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ "Fork" æŒ‰é’®ï¼Œå°†é¡¹ç›® fork åˆ°æ‚¨çš„è´¦æˆ·ã€‚

### 2. å…‹éš†ä»“åº“

```bash
git clone https://github.com/YOUR_USERNAME/movies-recommend.git
cd movies-recommend
```

### 3. åˆ›å»ºåˆ†æ”¯

```bash
# ä» main åˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# æˆ–åˆ›å»º bug ä¿®å¤åˆ†æ”¯
git checkout -b fix/bug-description
```

åˆ†æ”¯å‘½åè§„èŒƒï¼š
- `feature/åŠŸèƒ½åç§°` - æ–°åŠŸèƒ½
- `fix/bugæè¿°` - Bug ä¿®å¤
- `docs/æ–‡æ¡£ä¸»é¢˜` - æ–‡æ¡£æ›´æ–°
- `refactor/é‡æ„æè¿°` - ä»£ç é‡æ„
- `test/æµ‹è¯•æè¿°` - æµ‹è¯•ç›¸å…³

### 4. è®¾ç½®å¼€å‘ç¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶
```

### 5. è¿›è¡Œå¼€å‘

```bash
# ä¿æŒä»£ç åŒæ­¥
git fetch upstream
git merge upstream/main

# è¿›è¡Œæ‚¨çš„ä¿®æ”¹
# ...

# è¿è¡Œæµ‹è¯•
pytest tests/

# æ£€æŸ¥ä»£ç é£æ ¼
flake8 .
black --check .
```

### 6. æäº¤æ›´æ”¹

```bash
# æ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶
git add .

# æäº¤ï¼ˆéµå¾ªæäº¤è§„èŒƒï¼‰
git commit -m "feat: æ·»åŠ ç”µå½±æ¨èç¼“å­˜åŠŸèƒ½"

# æ¨é€åˆ°æ‚¨çš„ fork
git push origin feature/your-feature-name
```

### 7. åˆ›å»º Pull Request

1. è®¿é—®æ‚¨ fork çš„ä»“åº“é¡µé¢
2. ç‚¹å‡» "New Pull Request"
3. å¡«å†™ PR æè¿°ï¼š
   - æ›´æ”¹çš„å†…å®¹
   - ç›¸å…³çš„ Issue
   - æµ‹è¯•æƒ…å†µ
   - æˆªå›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰

---

## ä»£ç è§„èŒƒ

### Python ä»£ç é£æ ¼

éµå¾ª [PEP 8](https://www.python.org/dev/peps/pep-0008/) è§„èŒƒï¼š

```python
# å¥½çš„ç¤ºä¾‹
def get_movie_recommendations(user_id, limit=10):
    """è·å–ç”¨æˆ·çš„ç”µå½±æ¨è
    
    Args:
        user_id (int): ç”¨æˆ·ID
        limit (int): æ¨èæ•°é‡é™åˆ¶ï¼Œé»˜è®¤10
        
    Returns:
        list: æ¨èçš„ç”µå½±åˆ—è¡¨
    """
    if not user_id:
        raise ValueError("ç”¨æˆ·IDä¸èƒ½ä¸ºç©º")
    
    recommendations = recommender.get_recommendations(user_id, limit)
    return recommendations


# ä¸å¥½çš„ç¤ºä¾‹
def GetMovieRecs(uid,lmt=10):
    if not uid: raise ValueError("ç”¨æˆ·IDä¸èƒ½ä¸ºç©º")
    recs=recommender.get_recommendations(uid,lmt)
    return recs
```

### ä»£ç æ ¼å¼åŒ–

ä½¿ç”¨ [Black](https://github.com/psf/black) è‡ªåŠ¨æ ¼å¼åŒ–ï¼š

```bash
# æ ¼å¼åŒ–æ‰€æœ‰æ–‡ä»¶
black .

# æ£€æŸ¥ä½†ä¸ä¿®æ”¹
black --check .
```

### ä»£ç æ£€æŸ¥

ä½¿ç”¨ [Flake8](https://flake8.pycqa.org/)ï¼š

```bash
flake8 . --max-line-length=100 --exclude=venv,__pycache__
```

### æ–‡æ¡£å­—ç¬¦ä¸²

ä½¿ç”¨ Google é£æ ¼çš„ docstringï¼š

```python
def calculate_similarity(movie1_id, movie2_id):
    """è®¡ç®—ä¸¤éƒ¨ç”µå½±çš„ç›¸ä¼¼åº¦
    
    åŸºäºå¤šä¸ªç»´åº¦ï¼ˆå¯¼æ¼”ã€æ¼”å‘˜ã€ç±»å‹ç­‰ï¼‰è®¡ç®—ç”µå½±ä¹‹é—´çš„ç›¸ä¼¼åº¦åˆ†æ•°ã€‚
    
    Args:
        movie1_id (int): ç¬¬ä¸€éƒ¨ç”µå½±çš„ID
        movie2_id (int): ç¬¬äºŒéƒ¨ç”µå½±çš„ID
        
    Returns:
        float: ç›¸ä¼¼åº¦åˆ†æ•°ï¼ŒèŒƒå›´ 0-1
        
    Raises:
        ValueError: å¦‚æœç”µå½±IDä¸å­˜åœ¨
        
    Example:
        >>> similarity = calculate_similarity(123, 456)
        >>> print(f"ç›¸ä¼¼åº¦: {similarity:.2f}")
        ç›¸ä¼¼åº¦: 0.85
    """
    pass
```

---

## æäº¤è§„èŒƒ

### Commit Message æ ¼å¼

éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<ç±»å‹>(<èŒƒå›´>): <æè¿°>

[å¯é€‰çš„æ­£æ–‡]

[å¯é€‰çš„è„šæ³¨]
```

### ç±»å‹ (Type)

- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: ä»…æ–‡æ¡£æ›´æ”¹
- `style`: ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºæ ¼ã€æ ¼å¼åŒ–ç­‰ï¼‰
- `refactor`: æ—¢ä¸ä¿®å¤ bug ä¹Ÿä¸æ·»åŠ åŠŸèƒ½çš„ä»£ç æ›´æ”¹
- `perf`: æé«˜æ€§èƒ½çš„ä»£ç æ›´æ”¹
- `test`: æ·»åŠ ç¼ºå¤±çš„æµ‹è¯•æˆ–æ›´æ­£ç°æœ‰æµ‹è¯•
- `build`: å½±å“æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–çš„æ›´æ”¹
- `ci`: CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„æ›´æ”¹
- `chore`: å…¶ä»–ä¸ä¿®æ”¹ src æˆ–æµ‹è¯•æ–‡ä»¶çš„æ›´æ”¹

### ç¤ºä¾‹

```bash
# æ·»åŠ æ–°åŠŸèƒ½
git commit -m "feat(recommender): æ·»åŠ åŸºäºååŒè¿‡æ»¤çš„æ¨èç®—æ³•"

# ä¿®å¤ Bug
git commit -m "fix(auth): ä¿®å¤ç”¨æˆ·ç™»å½•æ—¶çš„å¯†ç éªŒè¯é—®é¢˜"

# æ›´æ–°æ–‡æ¡£
git commit -m "docs(readme): æ›´æ–°å®‰è£…è¯´æ˜å’Œä¾èµ–åˆ—è¡¨"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf(database): ä¼˜åŒ–ç”µå½±æŸ¥è¯¢çš„æ•°æ®åº“ç´¢å¼•"

# å¸¦æ­£æ–‡çš„æäº¤
git commit -m "feat(api): æ·»åŠ ç”µå½±æœç´¢API

- å®ç°å…³é”®è¯æœç´¢åŠŸèƒ½
- æ”¯æŒåˆ†é¡µå’Œæ’åº
- æ·»åŠ æœç´¢ç»“æœç¼“å­˜

Closes #123"
```

---

## æµ‹è¯•è¦æ±‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/test_recommender.py

# è¿è¡Œç‰¹å®šæµ‹è¯•å‡½æ•°
pytest tests/test_recommender.py::test_get_recommendations

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
pytest --cov=movies_recommend tests/
```

### ç¼–å†™æµ‹è¯•

ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•ï¼š

```python
# tests/test_recommender.py
import pytest
from movies_recommend.recommender import get_recommendations_for_user

def test_get_recommendations_returns_list():
    """æµ‹è¯•æ¨èå‡½æ•°è¿”å›åˆ—è¡¨"""
    result = get_recommendations_for_user(user_id=1, n=5)
    assert isinstance(result, list)
    assert len(result) <= 5

def test_get_recommendations_with_invalid_user():
    """æµ‹è¯•æ— æ•ˆç”¨æˆ·IDæ—¶çš„é”™è¯¯å¤„ç†"""
    with pytest.raises(ValueError):
        get_recommendations_for_user(user_id=-1)
```

---

## æ–‡æ¡£è´¡çŒ®

### æ–‡æ¡£ç»“æ„

```
doc/
â”œâ”€â”€ README.md           # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ API.md              # API æ–‡æ¡£
â”œâ”€â”€ DEPLOYMENT.md       # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ DATABASE_STRUCTURE.md  # æ•°æ®åº“ç»“æ„
â””â”€â”€ CONTRIBUTING.md     # æœ¬æ–‡ä»¶
```

### æ–‡æ¡£é£æ ¼

- ä½¿ç”¨æ¸…æ™°çš„æ ‡é¢˜å±‚çº§
- æ·»åŠ ä»£ç ç¤ºä¾‹
- åŒ…å«å¿…è¦çš„æˆªå›¾
- ä½¿ç”¨è¡¨æ ¼å’Œåˆ—è¡¨æé«˜å¯è¯»æ€§
- ä¿æŒè¯­è¨€ç®€æ´æ˜äº†

---

## Pull Request æ£€æŸ¥æ¸…å•

åœ¨æäº¤ PR å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] ä»£ç éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒ
- [ ] å·²æ·»åŠ å¿…è¦çš„æµ‹è¯•ï¼Œä¸”æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] Commit message éµå¾ªæäº¤è§„èŒƒ
- [ ] æ²¡æœ‰ä¸å¿…è¦çš„è°ƒè¯•ä»£ç æˆ–æ³¨é‡Š
- [ ] æ²¡æœ‰åˆå¹¶å†²çª
- [ ] å·²åœ¨æœ¬åœ°æµ‹è¯•è¿‡æ‰€æœ‰æ›´æ”¹

---

## ä»£ç å®¡æŸ¥

### å®¡æŸ¥æµç¨‹

1. é¡¹ç›®ç»´æŠ¤è€…ä¼šå®¡æŸ¥æ‚¨çš„ PR
2. å¯èƒ½ä¼šæå‡ºä¿®æ”¹å»ºè®®
3. æ ¹æ®åé¦ˆè¿›è¡Œè°ƒæ•´
4. å®¡æŸ¥é€šè¿‡åä¼šåˆå¹¶åˆ°ä¸»åˆ†æ”¯

### å“åº”æ—¶é—´

- æˆ‘ä»¬ä¼šå°½å¿«å®¡æŸ¥ PRï¼ˆé€šå¸¸ 1-3 å¤©ï¼‰
- å¦‚æœ‰ç–‘é—®ï¼Œå¯ä»¥åœ¨ PR ä¸­è¯„è®º

---

## è·å–å¸®åŠ©

### é—®é¢˜è®¨è®º

- ğŸ’¬ [GitHub Discussions](https://github.com/yourusername/movies-recommend/discussions)
- ğŸ› [GitHub Issues](https://github.com/yourusername/movies-recommend/issues)

### è”ç³»æ–¹å¼

- ğŸ“§ Email: your.email@example.com
- ğŸ’¬ WeChat: your-wechat-id

---

## æ„Ÿè°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

[![Contributors](https://contrib.rocks/image?repo=yourusername/movies-recommend)](https://github.com/yourusername/movies-recommend/graphs/contributors)

---

## è®¸å¯è¯

é€šè¿‡è´¡çŒ®ä»£ç ï¼Œæ‚¨åŒæ„æ‚¨çš„è´¡çŒ®å°†éµå¾ªæœ¬é¡¹ç›®çš„ [MIT License](../LICENSE)ã€‚
